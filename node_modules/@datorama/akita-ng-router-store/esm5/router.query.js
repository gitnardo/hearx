import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { RouterStore } from './router.store';
import { Query, filterNil } from '@datorama/akita';
import { combineLatest } from 'rxjs';
import { map, pluck, distinctUntilChanged } from 'rxjs/operators';
function slice(section) {
    return function (source) {
        return source.pipe(map(function (data) { return data.state; })).pipe(filterNil, map(function (state) { return state.root[section]; }));
    };
}
var RouterQuery = /** @class */ (function (_super) {
    tslib_1.__extends(RouterQuery, _super);
    function RouterQuery(store) {
        var _this = _super.call(this, store) || this;
        _this.store = store;
        return _this;
    }
    RouterQuery.prototype.selectParams = function (names) {
        var _this = this;
        if (names === undefined) {
            return this.select().pipe(slice('params'), distinctUntilChanged());
        }
        var select = function (p) {
            return _this.select().pipe(slice('params'), pluck(p), distinctUntilChanged());
        };
        if (Array.isArray(names)) {
            var sources = names.map(select);
            return combineLatest(sources);
        }
        return select(names).pipe(distinctUntilChanged());
    };
    RouterQuery.prototype.getParams = function (name) {
        if (this.getValue().state) {
            var params = this.getValue().state.root.params;
            if (name === undefined) {
                return params;
            }
            return params[name];
        }
        return null;
    };
    RouterQuery.prototype.selectQueryParams = function (names) {
        var _this = this;
        if (names === undefined) {
            return this.select().pipe(slice('queryParams'), distinctUntilChanged());
        }
        var select = function (p) {
            return _this.select().pipe(slice('queryParams'), pluck(p), distinctUntilChanged());
        };
        if (Array.isArray(names)) {
            var sources = names.map(select);
            return combineLatest(sources);
        }
        return select(names);
    };
    RouterQuery.prototype.getQueryParams = function (name) {
        if (this.getValue().state) {
            var params = this.getValue().state.root.queryParams;
            if (name === undefined) {
                return params;
            }
            return params[name];
        }
        return null;
    };
    RouterQuery.prototype.selectFragment = function () {
        return this.select().pipe(slice('fragment'), distinctUntilChanged());
    };
    RouterQuery.prototype.getFragment = function () {
        if (this.getValue().state) {
            return this.getValue().state.root.fragment;
        }
        return null;
    };
    RouterQuery.prototype.selectData = function (name) {
        if (name === undefined) {
            return this.select().pipe(slice('data'), distinctUntilChanged());
        }
        return this.select().pipe(slice('data'), pluck(name), distinctUntilChanged());
    };
    RouterQuery.prototype.getData = function (name) {
        if (this.getValue().state) {
            var data = this.getValue().state.root.data;
            if (name === undefined) {
                return data;
            }
            return data[name];
        }
        return null;
    };
    RouterQuery = tslib_1.__decorate([
        Injectable(),
        tslib_1.__metadata("design:paramtypes", [RouterStore])
    ], RouterQuery);
    return RouterQuery;
}(Query));
export { RouterQuery };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLnF1ZXJ5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGRhdG9yYW1hL2FraXRhLW5nLXJvdXRlci1zdG9yZS8iLCJzb3VyY2VzIjpbInJvdXRlci5xdWVyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFlLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUQsT0FBTyxFQUFFLEtBQUssRUFBVyxTQUFTLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQWMsYUFBYSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHbEUsU0FBUyxLQUFLLENBQUMsT0FBZTtJQUM1QixPQUFPLFVBQUMsTUFBb0Q7UUFDMUQsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLElBQUksQ0FBQyxLQUFLLEVBQVYsQ0FBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQzlDLFNBQVMsRUFDVCxHQUFHLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQyxLQUFNLENBQUMsSUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUE3QixDQUE2QixDQUFDLENBQzVDLENBQUM7SUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBR0Q7SUFBaUMsdUNBQWtCO0lBQ2pELHFCQUFzQixLQUFrQjtRQUF4QyxZQUNFLGtCQUFNLEtBQUssQ0FBQyxTQUNiO1FBRnFCLFdBQUssR0FBTCxLQUFLLENBQWE7O0lBRXhDLENBQUM7SUFLRCxrQ0FBWSxHQUFaLFVBQWdCLEtBQXlCO1FBQXpDLGlCQWtCQztRQWpCQyxJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDdkIsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUss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R0FBVixVQUFjLElBQWE7UUFDekIsSUFBSSxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ3RCLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1NBQ2xFO1FBRUQsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUN2QixLQUFLLENBQUMsTUFBTSxDQUFDLEVBQ2IsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUNYLG9CQUFvQixFQUFFLENBQ3ZCLENBQUM7SUFDSixDQUFDO0lBSUQsNkJBQU8sR0FBUCxVQUFXLElBQWE7UUFDdEIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQ3pCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUM5QyxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7Z0JBQ3RCLE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFFRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNuQjtRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQXhIVSxXQUFXO1FBRHZCLFVBQVUsRUFBRTtpREFFa0IsV0FBVztPQUQ3QixXQUFXLENBeUh2QjtJQUFELGtCQUFDO0NBQUEsQUF6SEQsQ0FBaUMsS0FBSyxHQXlIckM7U0F6SFksV0FBVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlclN0b3JlLCBSb3V0ZXJTdGF0ZSB9IGZyb20gJy4vcm91dGVyLnN0b3JlJztcbmltcG9ydCB7IFF1ZXJ5LCBIYXNoTWFwLCBmaWx0ZXJOaWwgfSBmcm9tICdAZGF0b3JhbWEvYWtpdGEnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgY29tYmluZUxhdGVzdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBwbHVjaywgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBSb3V0ZXJTdGF0ZVNuYXBzaG90LCBEYXRhIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuZnVuY3Rpb24gc2xpY2Uoc2VjdGlvbjogc3RyaW5nKSB7XG4gIHJldHVybiAoc291cmNlOiBPYnNlcnZhYmxlPFJvdXRlclN0YXRlPFJvdXRlclN0YXRlU25hcHNob3Q+PikgPT4ge1xuICAgIHJldHVybiBzb3VyY2UucGlwZShtYXAoZGF0YSA9PiBkYXRhLnN0YXRlKSkucGlwZShcbiAgICAgIGZpbHRlck5pbCxcbiAgICAgIG1hcChzdGF0ZSA9PiAoc3RhdGUhLnJvb3QgYXMgYW55KVtzZWN0aW9uXSlcbiAgICApO1xuICB9O1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUm91dGVyUXVlcnkgZXh0ZW5kcyBRdWVyeTxSb3V0ZXJTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3RvcmU6IFJvdXRlclN0b3JlKSB7XG4gICAgc3VwZXIoc3RvcmUpO1xuICB9XG5cbiAgc2VsZWN0UGFyYW1zPFQ+KG5hbWVzOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xuICBzZWxlY3RQYXJhbXM8VD4obmFtZXM6IHN0cmluZ1tdKTogT2JzZXJ2YWJsZTxUW10+O1xuICBzZWxlY3RQYXJhbXM8VD4oKTogT2JzZXJ2YWJsZTxIYXNoTWFwPFQ+PjtcbiAgc2VsZWN0UGFyYW1zPFQ+KG5hbWVzPzogc3RyaW5nIHwgc3RyaW5nW10pOiBPYnNlcnZhYmxlPFQgfCBUW10gfCBIYXNoTWFwPFQ+PiB7XG4gICAgaWYgKG5hbWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdCgpLnBpcGUoc2xpY2UoJ3BhcmFtcycpLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3QgPSAocDogc3RyaW5nKSA9PlxuICAgICAgdGhpcy5zZWxlY3QoKS5waXBlKFxuICAgICAgICBzbGljZSgncGFyYW1zJyksXG4gICAgICAgIHBsdWNrKHApLFxuICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICAgICApO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpKSB7XG4gICAgICBjb25zdCBzb3VyY2VzID0gbmFtZXMubWFwKHNlbGVjdCk7XG4gICAgICByZXR1cm4gY29tYmluZUxhdGVzdChzb3VyY2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0KG5hbWVzKS5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuICB9XG5cbiAgZ2V0UGFyYW1zPFQ+KCk6IEhhc2hNYXA8VD47XG4gIGdldFBhcmFtczxUPihuYW1lOiBzdHJpbmcpOiBUO1xuICBnZXRQYXJhbXM8VD4obmFtZT86IHN0cmluZyk6IFQgfCBIYXNoTWFwPGFueT4gfCBudWxsIHtcbiAgICBpZiAodGhpcy5nZXRWYWx1ZSgpLnN0YXRlKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmdldFZhbHVlKCkuc3RhdGUhLnJvb3QucGFyYW1zO1xuICAgICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyYW1zW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc2VsZWN0UXVlcnlQYXJhbXM8VD4obmFtZXM6IHN0cmluZyk6IE9ic2VydmFibGU8VD47XG4gIHNlbGVjdFF1ZXJ5UGFyYW1zPFQ+KG5hbWVzOiBzdHJpbmdbXSk6IE9ic2VydmFibGU8VFtdPjtcbiAgc2VsZWN0UXVlcnlQYXJhbXM8VD4oKTogT2JzZXJ2YWJsZTxIYXNoTWFwPFQ+PjtcbiAgc2VsZWN0UXVlcnlQYXJhbXM8VD4obmFtZXM/OiBzdHJpbmcgfCBzdHJpbmdbXSk6IE9ic2VydmFibGU8VCB8IFRbXSB8IEhhc2hNYXA8VD4+IHtcbiAgICBpZiAobmFtZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0KCkucGlwZShzbGljZSgncXVlcnlQYXJhbXMnKSwgZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0ID0gKHA6IHN0cmluZykgPT5cbiAgICAgIHRoaXMuc2VsZWN0KCkucGlwZShcbiAgICAgICAgc2xpY2UoJ3F1ZXJ5UGFyYW1zJyksXG4gICAgICAgIHBsdWNrKHApLFxuICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICAgICApO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpKSB7XG4gICAgICBjb25zdCBzb3VyY2VzID0gbmFtZXMubWFwKHNlbGVjdCk7XG4gICAgICByZXR1cm4gY29tYmluZUxhdGVzdChzb3VyY2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0KG5hbWVzKTtcbiAgfVxuXG4gIGdldFF1ZXJ5UGFyYW1zPFQ+KG5hbWU6IHN0cmluZyk6IFQ7XG4gIGdldFF1ZXJ5UGFyYW1zPFQ+KCk6IEhhc2hNYXA8VD47XG4gIGdldFF1ZXJ5UGFyYW1zPFQ+KG5hbWU/OiBzdHJpbmcpOiBUIHwgSGFzaE1hcDxUPiB8IG51bGwge1xuICAgIGlmICh0aGlzLmdldFZhbHVlKCkuc3RhdGUpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuZ2V0VmFsdWUoKS5zdGF0ZSEucm9vdC5xdWVyeVBhcmFtcztcbiAgICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcmFtc1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHNlbGVjdEZyYWdtZW50KCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0KCkucGlwZShzbGljZSgnZnJhZ21lbnQnKSwgZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gIH1cblxuICBnZXRGcmFnbWVudCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodGhpcy5nZXRWYWx1ZSgpLnN0YXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpLnN0YXRlIS5yb290LmZyYWdtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc2VsZWN0RGF0YTxUPihuYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+O1xuICBzZWxlY3REYXRhPFQ+KCk6IE9ic2VydmFibGU8SGFzaE1hcDxUPj47XG4gIHNlbGVjdERhdGE8VD4obmFtZT86IHN0cmluZyk6IE9ic2VydmFibGU8VCB8IEhhc2hNYXA8VD4+IHtcbiAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3QoKS5waXBlKHNsaWNlKCdkYXRhJyksIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlbGVjdCgpLnBpcGUoXG4gICAgICBzbGljZSgnZGF0YScpLFxuICAgICAgcGx1Y2sobmFtZSksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICAgKTtcbiAgfVxuXG4gIGdldERhdGE8VD4obmFtZTogc3RyaW5nKTogVCB8IG51bGw7XG4gIGdldERhdGE8VD4oKTogRGF0YSB8IG51bGw7XG4gIGdldERhdGE8VD4obmFtZT86IHN0cmluZyk6IERhdGEgfCBudWxsIHtcbiAgICBpZiAodGhpcy5nZXRWYWx1ZSgpLnN0YXRlKSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRWYWx1ZSgpLnN0YXRlIS5yb290LmRhdGE7XG4gICAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YVtuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl19